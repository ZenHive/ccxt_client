defmodule CCXT.Types.Schema.FundingRate do
  @moduledoc """
  Auto-generated schema for `CCXT.Types.FundingRate`.

  Source: priv/ccxt/ts/src/base/types.ts

  ## Fields

  - `symbol` - String.t()
  - `raw` - any()
  - `timestamp` - number() (optional)
  - `funding_rate` - number() (optional)
  - `datetime` - String.t() (optional)
  - `mark_price` - number() (optional)
  - `index_price` - number() (optional)
  - `interest_rate` - number() (optional)
  - `estimated_settle_price` - number() (optional)
  - `funding_timestamp` - number() (optional)
  - `funding_datetime` - String.t() (optional)
  - `next_funding_timestamp` - number() (optional)
  - `next_funding_datetime` - String.t() (optional)
  - `next_funding_rate` - number() (optional)
  - `previous_funding_timestamp` - number() (optional)
  - `previous_funding_datetime` - String.t() (optional)
  - `previous_funding_rate` - number() (optional)
  - `interval` - String.t() (optional)

  ## Usage

  This module is used by `CCXT.Types.FundingRate`:

      defmodule CCXT.Types.FundingRate do
        use CCXT.Types.Schema.FundingRate
      end

  Do not edit this file manually - it will be overwritten by `mix ccxt.gen.types`.

  """

  @fields [
    %{name: :symbol, optional: false, source: "symbol", type: "String.t()"},
    %{name: :raw, optional: false, source: "info", type: "any()"},
    %{name: :timestamp, optional: true, source: "timestamp", type: "number()"},
    %{name: :funding_rate, optional: true, source: "fundingRate", type: "number()"},
    %{name: :datetime, optional: true, source: "datetime", type: "String.t()"},
    %{name: :mark_price, optional: true, source: "markPrice", type: "number()"},
    %{name: :index_price, optional: true, source: "indexPrice", type: "number()"},
    %{name: :interest_rate, optional: true, source: "interestRate", type: "number()"},
    %{
      name: :estimated_settle_price,
      optional: true,
      source: "estimatedSettlePrice",
      type: "number()"
    },
    %{name: :funding_timestamp, optional: true, source: "fundingTimestamp", type: "number()"},
    %{name: :funding_datetime, optional: true, source: "fundingDatetime", type: "String.t()"},
    %{
      name: :next_funding_timestamp,
      optional: true,
      source: "nextFundingTimestamp",
      type: "number()"
    },
    %{
      name: :next_funding_datetime,
      optional: true,
      source: "nextFundingDatetime",
      type: "String.t()"
    },
    %{name: :next_funding_rate, optional: true, source: "nextFundingRate", type: "number()"},
    %{
      name: :previous_funding_timestamp,
      optional: true,
      source: "previousFundingTimestamp",
      type: "number()"
    },
    %{
      name: :previous_funding_datetime,
      optional: true,
      source: "previousFundingDatetime",
      type: "String.t()"
    },
    %{
      name: :previous_funding_rate,
      optional: true,
      source: "previousFundingRate",
      type: "number()"
    },
    %{name: :interval, optional: true, source: "interval", type: "String.t()"}
  ]
  @type_spec_str """
  %__MODULE__{
    symbol: String.t(),
    raw: any(),
    timestamp: number() | nil,
    funding_rate: number() | nil,
    datetime: String.t() | nil,
    mark_price: number() | nil,
    index_price: number() | nil,
    interest_rate: number() | nil,
    estimated_settle_price: number() | nil,
    funding_timestamp: number() | nil,
    funding_datetime: String.t() | nil,
    next_funding_timestamp: number() | nil,
    next_funding_datetime: String.t() | nil,
    next_funding_rate: number() | nil,
    previous_funding_timestamp: number() | nil,
    previous_funding_datetime: String.t() | nil,
    previous_funding_rate: number() | nil,
    interval: String.t() | nil
  }
  """
  @type_spec Code.string_to_quoted!(@type_spec_str)

  defmacro __using__(opts) do
    fields = @fields
    type_spec = @type_spec
    struct_defaults = Keyword.get(opts, :struct_defaults, [])
    field_names = Enum.map(fields, & &1.name)

    struct_fields =
      Enum.map(field_names, fn name ->
        if Keyword.has_key?(struct_defaults, name) do
          {name, Keyword.fetch!(struct_defaults, name)}
        else
          name
        end
      end)

    quote do
      import CCXT.Types.Helpers, only: [get_value: 2, get_camel_value: 3]

      @fields unquote(Macro.escape(fields))
      @type_spec unquote(Macro.escape(type_spec))
      @type t :: unquote(type_spec)
      defstruct unquote(struct_fields)
      @spec from_map(map()) :: t()
      def from_map(map) when is_map(map) do
        %__MODULE__{
          symbol: get_value(map, :symbol),
          raw: get_camel_value(map, :raw, :info),
          timestamp: get_value(map, :timestamp),
          funding_rate: get_camel_value(map, :funding_rate, :fundingRate),
          datetime: get_value(map, :datetime),
          mark_price: get_camel_value(map, :mark_price, :markPrice),
          index_price: get_camel_value(map, :index_price, :indexPrice),
          interest_rate: get_camel_value(map, :interest_rate, :interestRate),
          estimated_settle_price: get_camel_value(map, :estimated_settle_price, :estimatedSettlePrice),
          funding_timestamp: get_camel_value(map, :funding_timestamp, :fundingTimestamp),
          funding_datetime: get_camel_value(map, :funding_datetime, :fundingDatetime),
          next_funding_timestamp: get_camel_value(map, :next_funding_timestamp, :nextFundingTimestamp),
          next_funding_datetime: get_camel_value(map, :next_funding_datetime, :nextFundingDatetime),
          next_funding_rate: get_camel_value(map, :next_funding_rate, :nextFundingRate),
          previous_funding_timestamp: get_camel_value(map, :previous_funding_timestamp, :previousFundingTimestamp),
          previous_funding_datetime: get_camel_value(map, :previous_funding_datetime, :previousFundingDatetime),
          previous_funding_rate: get_camel_value(map, :previous_funding_rate, :previousFundingRate),
          interval: get_value(map, :interval)
        }
      end

      defoverridable from_map: 1
    end
  end
end

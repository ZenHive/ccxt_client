defmodule CCXT.Types.Schema.MarketInterface do
  @moduledoc """
  Auto-generated schema for `CCXT.Types.MarketInterface`.

  Source: priv/ccxt/ts/src/base/types.ts

  ## Fields

  - `id` - String.t() | nil
  - `numeric_id` - number() | nil (optional)
  - `uppercase_id` - String.t() | nil (optional)
  - `lowercase_id` - String.t() | nil (optional)
  - `symbol` - String.t()
  - `base` - String.t()
  - `quote` - String.t()
  - `base_id` - String.t() | nil
  - `quote_id` - String.t() | nil
  - `active` - boolean() | nil
  - `type` - String.t()
  - `sub_type` - String.t() | nil (optional)
  - `spot` - boolean()
  - `margin` - boolean()
  - `swap` - boolean()
  - `future` - boolean()
  - `option` - boolean()
  - `contract` - boolean()
  - `settle` - String.t() | nil
  - `settle_id` - String.t() | nil
  - `contract_size` - number() | nil
  - `linear` - boolean() | nil
  - `inverse` - boolean() | nil
  - `quanto` - boolean() (optional)
  - `expiry` - integer() | nil
  - `expiry_datetime` - String.t() | nil
  - `strike` - number() | nil
  - `option_type` - String.t() | nil
  - `taker` - number() | nil (optional)
  - `maker` - number() | nil (optional)
  - `percentage` - boolean() | nil (optional)
  - `tier_based` - boolean() | nil (optional)
  - `fee_side` - String.t() | nil (optional)
  - `margin_modes` - CCXT.Types.MarketMarginModes.t() (optional)
  - `created` - integer() | nil
  - `raw` - any()

  ## Usage

  This module is used by `CCXT.Types.MarketInterface`:

      defmodule CCXT.Types.MarketInterface do
        use CCXT.Types.Schema.MarketInterface
      end

  Do not edit this file manually - it will be overwritten by `mix ccxt.gen.types`.

  """

  @fields [
    %{name: :id, optional: false, source: "id", type: "String.t() | nil"},
    %{name: :numeric_id, optional: true, source: "numericId", type: "number() | nil"},
    %{name: :uppercase_id, optional: true, source: "uppercaseId", type: "String.t() | nil"},
    %{name: :lowercase_id, optional: true, source: "lowercaseId", type: "String.t() | nil"},
    %{name: :symbol, optional: false, source: "symbol", type: "String.t()"},
    %{name: :base, optional: false, source: "base", type: "String.t()"},
    %{name: :quote, optional: false, source: "quote", type: "String.t()"},
    %{name: :base_id, optional: false, source: "baseId", type: "String.t() | nil"},
    %{name: :quote_id, optional: false, source: "quoteId", type: "String.t() | nil"},
    %{name: :active, optional: false, source: "active", type: "boolean() | nil"},
    %{name: :type, optional: false, source: "type", type: "String.t()"},
    %{name: :sub_type, optional: true, source: "subType", type: "String.t() | nil"},
    %{name: :spot, optional: false, source: "spot", type: "boolean()"},
    %{name: :margin, optional: false, source: "margin", type: "boolean()"},
    %{name: :swap, optional: false, source: "swap", type: "boolean()"},
    %{name: :future, optional: false, source: "future", type: "boolean()"},
    %{name: :option, optional: false, source: "option", type: "boolean()"},
    %{name: :contract, optional: false, source: "contract", type: "boolean()"},
    %{name: :settle, optional: false, source: "settle", type: "String.t() | nil"},
    %{name: :settle_id, optional: false, source: "settleId", type: "String.t() | nil"},
    %{name: :contract_size, optional: false, source: "contractSize", type: "number() | nil"},
    %{name: :linear, optional: false, source: "linear", type: "boolean() | nil"},
    %{name: :inverse, optional: false, source: "inverse", type: "boolean() | nil"},
    %{name: :quanto, optional: true, source: "quanto", type: "boolean()"},
    %{name: :expiry, optional: false, source: "expiry", type: "integer() | nil"},
    %{name: :expiry_datetime, optional: false, source: "expiryDatetime", type: "String.t() | nil"},
    %{name: :strike, optional: false, source: "strike", type: "number() | nil"},
    %{name: :option_type, optional: false, source: "optionType", type: "String.t() | nil"},
    %{name: :taker, optional: true, source: "taker", type: "number() | nil"},
    %{name: :maker, optional: true, source: "maker", type: "number() | nil"},
    %{name: :percentage, optional: true, source: "percentage", type: "boolean() | nil"},
    %{name: :tier_based, optional: true, source: "tierBased", type: "boolean() | nil"},
    %{name: :fee_side, optional: true, source: "feeSide", type: "String.t() | nil"},
    %{
      name: :margin_modes,
      optional: true,
      source: "marginModes",
      type: "CCXT.Types.MarketMarginModes.t()"
    },
    %{name: :created, optional: false, source: "created", type: "integer() | nil"},
    %{name: :raw, optional: false, source: "info", type: "any()"}
  ]
  @type_spec_str """
  %__MODULE__{
    id: String.t() | nil,
    numeric_id: number() | nil,
    uppercase_id: String.t() | nil,
    lowercase_id: String.t() | nil,
    symbol: String.t(),
    base: String.t(),
    quote: String.t(),
    base_id: String.t() | nil,
    quote_id: String.t() | nil,
    active: boolean() | nil,
    type: String.t(),
    sub_type: String.t() | nil,
    spot: boolean(),
    margin: boolean(),
    swap: boolean(),
    future: boolean(),
    option: boolean(),
    contract: boolean(),
    settle: String.t() | nil,
    settle_id: String.t() | nil,
    contract_size: number() | nil,
    linear: boolean() | nil,
    inverse: boolean() | nil,
    quanto: boolean() | nil,
    expiry: integer() | nil,
    expiry_datetime: String.t() | nil,
    strike: number() | nil,
    option_type: String.t() | nil,
    taker: number() | nil,
    maker: number() | nil,
    percentage: boolean() | nil,
    tier_based: boolean() | nil,
    fee_side: String.t() | nil,
    margin_modes: CCXT.Types.MarketMarginModes.t() | nil,
    created: integer() | nil,
    raw: any()
  }
  """
  @type_spec Code.string_to_quoted!(@type_spec_str)

  defmacro __using__(opts) do
    fields = @fields
    type_spec = @type_spec
    struct_defaults = Keyword.get(opts, :struct_defaults, [])
    field_names = Enum.map(fields, & &1.name)

    struct_fields =
      Enum.map(field_names, fn name ->
        if Keyword.has_key?(struct_defaults, name) do
          {name, Keyword.fetch!(struct_defaults, name)}
        else
          name
        end
      end)

    quote do
      import CCXT.Types.Helpers, only: [get_value: 2, get_camel_value: 3]

      @fields unquote(Macro.escape(fields))
      @type_spec unquote(Macro.escape(type_spec))
      @type t :: unquote(type_spec)
      defstruct unquote(struct_fields)
      @spec from_map(map()) :: t()
      def from_map(map) when is_map(map) do
        %__MODULE__{
          id: get_value(map, :id),
          numeric_id: get_camel_value(map, :numeric_id, :numericId),
          uppercase_id: get_camel_value(map, :uppercase_id, :uppercaseId),
          lowercase_id: get_camel_value(map, :lowercase_id, :lowercaseId),
          symbol: get_value(map, :symbol),
          base: get_value(map, :base),
          quote: get_value(map, :quote),
          base_id: get_camel_value(map, :base_id, :baseId),
          quote_id: get_camel_value(map, :quote_id, :quoteId),
          active: get_value(map, :active),
          type: get_value(map, :type),
          sub_type: get_camel_value(map, :sub_type, :subType),
          spot: get_value(map, :spot),
          margin: get_value(map, :margin),
          swap: get_value(map, :swap),
          future: get_value(map, :future),
          option: get_value(map, :option),
          contract: get_value(map, :contract),
          settle: get_value(map, :settle),
          settle_id: get_camel_value(map, :settle_id, :settleId),
          contract_size: get_camel_value(map, :contract_size, :contractSize),
          linear: get_value(map, :linear),
          inverse: get_value(map, :inverse),
          quanto: get_value(map, :quanto),
          expiry: get_value(map, :expiry),
          expiry_datetime: get_camel_value(map, :expiry_datetime, :expiryDatetime),
          strike: get_value(map, :strike),
          option_type: get_camel_value(map, :option_type, :optionType),
          taker: get_value(map, :taker),
          maker: get_value(map, :maker),
          percentage: get_value(map, :percentage),
          tier_based: get_camel_value(map, :tier_based, :tierBased),
          fee_side: get_camel_value(map, :fee_side, :feeSide),
          margin_modes: get_camel_value(map, :margin_modes, :marginModes),
          created: get_value(map, :created),
          raw: get_camel_value(map, :raw, :info)
        }
      end

      defoverridable from_map: 1
    end
  end
end
